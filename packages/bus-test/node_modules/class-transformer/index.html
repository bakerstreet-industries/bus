<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>class-transformer | @node-ts/bus</title>
    <meta name="description" content="Enterprise message bus library for typescript">
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-139036417-1"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-139036417-1');
    </script>
    
    <link rel="preload" href="/bus/assets/css/0.styles.a0567244.css" as="style"><link rel="preload" href="/bus/assets/js/app.9b9c970b.js" as="script"><link rel="preload" href="/bus/assets/js/2.40db6fc8.js" as="script"><link rel="preload" href="/bus/assets/js/22.153c6055.js" as="script"><link rel="prefetch" href="/bus/assets/js/10.da946e8a.js"><link rel="prefetch" href="/bus/assets/js/11.f7b4aa18.js"><link rel="prefetch" href="/bus/assets/js/12.aa407c4a.js"><link rel="prefetch" href="/bus/assets/js/13.36afd7f4.js"><link rel="prefetch" href="/bus/assets/js/14.44c52693.js"><link rel="prefetch" href="/bus/assets/js/15.18967a22.js"><link rel="prefetch" href="/bus/assets/js/16.d53fa3bb.js"><link rel="prefetch" href="/bus/assets/js/17.456ac79b.js"><link rel="prefetch" href="/bus/assets/js/18.fb92a928.js"><link rel="prefetch" href="/bus/assets/js/19.39fc7cc9.js"><link rel="prefetch" href="/bus/assets/js/20.1674d02d.js"><link rel="prefetch" href="/bus/assets/js/21.b2f3dc85.js"><link rel="prefetch" href="/bus/assets/js/23.5cd90b86.js"><link rel="prefetch" href="/bus/assets/js/24.930648bb.js"><link rel="prefetch" href="/bus/assets/js/25.2f9a4e57.js"><link rel="prefetch" href="/bus/assets/js/26.0b3967e8.js"><link rel="prefetch" href="/bus/assets/js/27.6d0990f4.js"><link rel="prefetch" href="/bus/assets/js/28.fe213cf5.js"><link rel="prefetch" href="/bus/assets/js/29.c9a1d805.js"><link rel="prefetch" href="/bus/assets/js/3.ad62bd45.js"><link rel="prefetch" href="/bus/assets/js/30.d658eac0.js"><link rel="prefetch" href="/bus/assets/js/31.ee0536bc.js"><link rel="prefetch" href="/bus/assets/js/32.67be88d4.js"><link rel="prefetch" href="/bus/assets/js/33.ec397c9a.js"><link rel="prefetch" href="/bus/assets/js/34.16465bea.js"><link rel="prefetch" href="/bus/assets/js/35.5f7522c2.js"><link rel="prefetch" href="/bus/assets/js/36.fc380b80.js"><link rel="prefetch" href="/bus/assets/js/37.0a8285aa.js"><link rel="prefetch" href="/bus/assets/js/38.0467eb59.js"><link rel="prefetch" href="/bus/assets/js/39.4cb19319.js"><link rel="prefetch" href="/bus/assets/js/4.14653418.js"><link rel="prefetch" href="/bus/assets/js/40.304ab5a1.js"><link rel="prefetch" href="/bus/assets/js/41.69b46a27.js"><link rel="prefetch" href="/bus/assets/js/42.39ba8e37.js"><link rel="prefetch" href="/bus/assets/js/43.9085c1f3.js"><link rel="prefetch" href="/bus/assets/js/44.be17aea7.js"><link rel="prefetch" href="/bus/assets/js/45.204a2c48.js"><link rel="prefetch" href="/bus/assets/js/5.13b1a726.js"><link rel="prefetch" href="/bus/assets/js/6.a563d3f5.js"><link rel="prefetch" href="/bus/assets/js/7.074f2c3e.js"><link rel="prefetch" href="/bus/assets/js/8.397fdcaa.js"><link rel="prefetch" href="/bus/assets/js/9.52cf5dbe.js">
    <link rel="stylesheet" href="/bus/assets/css/0.styles.a0567244.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/bus/" class="home-link router-link-active"><!----> <span class="site-name">@node-ts/bus</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/bus/" class="nav-link">Home</a></div><div class="nav-item"><a href="/bus/packages/bus-core/src/handler/" class="nav-link">Handlers</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Transports</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bus/packages/bus-sqs/" class="nav-link">SQS</a></li><li class="dropdown-item"><!----> <a href="/bus/packages/bus-rabbitmq/" class="nav-link">RabbitMQ</a></li></ul></div></div><div class="nav-item"><a href="/bus/packages/bus-workflow/" class="nav-link">Workflows</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Persistence</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bus/packages/bus-postgres/" class="nav-link">Postgres</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/node-ts/bus" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/bus/" class="nav-link">Home</a></div><div class="nav-item"><a href="/bus/packages/bus-core/src/handler/" class="nav-link">Handlers</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Transports</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bus/packages/bus-sqs/" class="nav-link">SQS</a></li><li class="dropdown-item"><!----> <a href="/bus/packages/bus-rabbitmq/" class="nav-link">RabbitMQ</a></li></ul></div></div><div class="nav-item"><a href="/bus/packages/bus-workflow/" class="nav-link">Workflows</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Persistence</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bus/packages/bus-postgres/" class="nav-link">Postgres</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/node-ts/bus" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/bus/" class="sidebar-link">Home</a></li><li><a href="/bus/packages/bus-messages/" class="sidebar-link">Messages</a></li><li><a href="/bus/packages/bus-core/src/handler/" class="sidebar-link">Handlers</a></li><li><a href="/bus/packages/bus-core/src/transport/" class="sidebar-link">Transports</a></li><li><a href="/bus/packages/bus-workflow/" class="sidebar-link">Workflows</a></li><li><a href="/bus/packages/bus-workflow/src/workflow/persistence/" class="sidebar-link">Persistence</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="class-transformer"><a href="#class-transformer" aria-hidden="true" class="header-anchor">#</a> class-transformer</h1> <p><img src="https://github.com/typestack/class-transformer/workflows/CI/badge.svg" alt="Build Status"> <a href="https://codecov.io/gh/typestack/class-transformer" target="_blank" rel="noopener noreferrer"><img src="https://codecov.io/gh/typestack/class-transformer/branch/develop/graph/badge.svg" alt="codecov"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://badge.fury.io/js/class-transformer" target="_blank" rel="noopener noreferrer"><img src="https://badge.fury.io/js/class-transformer.svg" alt="npm version"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Its ES6 and Typescript era. Nowadays you are working with classes and constructor objects more than ever.
Class-transformer allows you to transform plain object to some instance of class and versa.
Also it allows to serialize / deserialize object based on criteria.
This tool is super useful on both frontend and backend.</p> <p>Example how to use with angular 2 in <a href="http://plnkr.co/edit/Mja1ZYAjVySWASMHVB9R" target="_blank" rel="noopener noreferrer">plunker<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
Source code is available <a href="https://github.com/pleerock/class-transformer-demo" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="table-of-contents"><a href="#table-of-contents" aria-hidden="true" class="header-anchor">#</a> Table of contents</h2> <ul><li><a href="#what-is-class-transformer">What is class-transformer</a></li> <li><a href="#installation">Installation</a> <ul><li><a href="#nodejs">Node.js</a></li> <li><a href="#browser">Browser</a></li></ul></li> <li><a href="#methods">Methods</a> <ul><li><a href="#plaintoclass">plainToClass</a></li> <li><a href="#plaintoclassfromexist">plainToClassFromExist</a></li> <li><a href="#classtoplain">classToPlain</a></li> <li><a href="#classtoclass">classToClass</a></li> <li><a href="#serialize">serialize</a></li> <li><a href="#deserialize-and-deserializearray">deserialize and deserializeArray</a></li></ul></li> <li><a href="#enforcing-type-safe-instance">Enforcing type-safe instance</a></li> <li><a href="#working-with-nested-objects">Working with nested objects</a> <ul><li><a href="#providing-more-than-one-type-option">Providing more than one type option</a></li></ul></li> <li><a href="#exposing-getters-and-method-return-values">Exposing getters and method return values</a></li> <li><a href="#exposing-properties-with-different-names">Exposing properties with different names</a></li> <li><a href="#skipping-specific-properties">Skipping specific properties</a></li> <li><a href="#skipping-depend-of-operation">Skipping depend of operation</a></li> <li><a href="#skipping-all-properties-of-the-class">Skipping all properties of the class</a></li> <li><a href="#skipping-private-properties-or-some-prefixed-properties">Skipping private properties, or some prefixed properties</a></li> <li><a href="#using-groups-to-control-excluded-properties">Using groups to control excluded properties</a></li> <li><a href="#using-versioning-to-control-exposed-and-excluded-properties">Using versioning to control exposed and excluded properties</a></li> <li><a href="#%D1%81onverting-date-strings-into-date-objects">Сonverting date strings into Date objects</a></li> <li><a href="#working-with-arrays">Working with arrays</a></li> <li><a href="#additional-data-transformation">Additional data transformation</a> <ul><li><a href="#basic-usage">Basic usage</a></li> <li><a href="#advanced-usage">Advanced usage</a></li></ul></li> <li><a href="#other-decorators">Other decorators</a></li> <li><a href="#working-with-generics">Working with generics</a></li> <li><a href="#implicit-type-conversion">Implicit type conversion</a></li> <li><a href="#how-does-it-handle-circular-references">How does it handle circular references?</a></li> <li><a href="#example-with-angular2">Example with Angular2</a></li> <li><a href="#samples">Samples</a></li> <li><a href="#release-notes">Release notes</a></li></ul> <h2 id="what-is-class-transformer⬆"><a href="#what-is-class-transformer⬆" aria-hidden="true" class="header-anchor">#</a> What is class-transformer<a href="#table-of-contents">⬆</a></h2> <p>In JavaScript there are two types of objects:</p> <ul><li>plain (literal) objects</li> <li>class (constructor) objects</li></ul> <p>Plain objects are objects that are instances of <code>Object</code> class.
Sometimes they are called <strong>literal</strong> objects, when created via <code>{}</code> notation.
Class objects are instances of classes with own defined constructor, properties and methods.
Usually you define them via <code>class</code> notation.</p> <p>So, what is the problem?</p> <p>Sometimes you want to transform plain javascript object to the ES6 <strong>classes</strong> you have.
For example, if you are loading a json from your backend, some api or from a json file,
and after you <code>JSON.parse</code> it you have a plain javascript object, not instance of class you have.</p> <p>For example you have a list of users in your <code>users.json</code> that you are loading:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;firstName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Johny&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lastName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Cage&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;age&quot;</span><span class="token operator">:</span> <span class="token number">27</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;firstName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Ismoil&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lastName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Somoni&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;age&quot;</span><span class="token operator">:</span> <span class="token number">50</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token property">&quot;firstName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Luke&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lastName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Dacascos&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;age&quot;</span><span class="token operator">:</span> <span class="token number">12</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>And you have a <code>User</code> class:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  firstName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  lastName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastName<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">isAdult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">&gt;</span> <span class="token number">36</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">&lt;</span> <span class="token number">60</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You are assuming that you are downloading users of type <code>User</code> from <code>users.json</code> file and may want to write
following code:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'users.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">users<span class="token punctuation">:</span> User<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// you can use users here, and type hinting also will be available to you,</span>
  <span class="token comment">//  but users are not actually instances of User class</span>
  <span class="token comment">// this means that you can't use methods of User class</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>In this code you can use <code>users[0].id</code>, you can also use <code>users[0].firstName</code> and <code>users[0].lastName</code>.
However you cannot use <code>users[0].getName()</code> or <code>users[0].isAdult()</code> because &quot;users&quot; actually is
array of plain javascript objects, not instances of User object.
You actually lied to compiler when you said that its <code>users: User[]</code>.</p> <p>So what to do? How to make a <code>users</code> array of instances of <code>User</code> objects instead of plain javascript objects?
Solution is to create new instances of User object and manually copy all properties to new objects.
But things may go wrong very fast once you have a more complex object hierarchy.</p> <p>Alternatives? Yes, you can use class-transformer. Purpose of this library is to help you to map your plain javascript
objects to the instances of classes you have.</p> <p>This library also great for models exposed in your APIs,
because it provides a great tooling to control what your models are exposing in your API.
Here is an example how it will look like:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'users.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">users<span class="token punctuation">:</span> Object<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> realUsers <span class="token operator">=</span> <span class="token function">plainToClass</span><span class="token punctuation">(</span>User<span class="token punctuation">,</span> users<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// now each user in realUsers is an instance of User class</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Now you can use <code>users[0].getName()</code> and <code>users[0].isAdult()</code> methods.</p> <h2 id="installation⬆"><a href="#installation⬆" aria-hidden="true" class="header-anchor">#</a> Installation<a href="#table-of-contents">⬆</a></h2> <h3 id="node-js⬆"><a href="#node-js⬆" aria-hidden="true" class="header-anchor">#</a> Node.js<a href="#table-of-contents">⬆</a></h3> <ol><li><p>Install module:</p> <p><code>npm install class-transformer --save</code></p></li> <li><p><code>reflect-metadata</code> shim is required, install it too:</p> <p><code>npm install reflect-metadata --save</code></p> <p>and make sure to import it in a global place, like app.ts:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token string">'reflect-metadata'</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>ES6 features are used, if you are using old version of node.js you may need to install es6-shim:</p> <p><code>npm install es6-shim --save</code></p> <p>and import it in a global place like app.ts:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token string">'es6-shim'</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <h3 id="browser⬆"><a href="#browser⬆" aria-hidden="true" class="header-anchor">#</a> Browser<a href="#table-of-contents">⬆</a></h3> <ol><li><p>Install module:</p> <p><code>npm install class-transformer --save</code></p></li> <li><p><code>reflect-metadata</code> shim is required, install it too:</p> <p><code>npm install reflect-metadata --save</code></p> <p>add <code>&lt;script&gt;</code> to reflect-metadata in the head of your <code>index.html</code>:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- ... --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>node_modules/reflect-metadata/Reflect.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- ... --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>If you are using angular 2 you should already have this shim installed.</p></li> <li><p>If you are using system.js you may want to add this into <code>map</code> and <code>package</code> config:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;map&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;class-transformer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node_modules/class-transformer&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;packages&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;class-transformer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;defaultExtension&quot;</span><span class="token operator">:</span> <span class="token string">&quot;js&quot;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h2 id="methods⬆"><a href="#methods⬆" aria-hidden="true" class="header-anchor">#</a> Methods<a href="#table-of-contents">⬆</a></h2> <h3 id="plaintoclass⬆"><a href="#plaintoclass⬆" aria-hidden="true" class="header-anchor">#</a> plainToClass<a href="#table-of-contents">⬆</a></h3> <p>This method transforms a plain javascript object to instance of specific class.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> plainToClass <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> users <span class="token operator">=</span> <span class="token function">plainToClass</span><span class="token punctuation">(</span>User<span class="token punctuation">,</span> userJson<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// to convert user plain object a single user. also supports arrays</span>
</code></pre></div><h3 id="plaintoclassfromexist⬆"><a href="#plaintoclassfromexist⬆" aria-hidden="true" class="header-anchor">#</a> plainToClassFromExist<a href="#table-of-contents">⬆</a></h3> <p>This method transforms a plain object into an instance using an already filled Object which is an instance of the target class.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> defaultUser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
defaultUser<span class="token punctuation">.</span>role <span class="token operator">=</span> <span class="token string">'user'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> mixedUser <span class="token operator">=</span> <span class="token function">plainToClassFromExist</span><span class="token punctuation">(</span>defaultUser<span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// mixed user should have the value role = user when no value is set otherwise.</span>
</code></pre></div><h3 id="classtoplain⬆"><a href="#classtoplain⬆" aria-hidden="true" class="header-anchor">#</a> classToPlain<a href="#table-of-contents">⬆</a></h3> <p>This method transforms your class object back to plain javascript object, that can be <code>JSON.stringify</code> later.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> classToPlain <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> photo <span class="token operator">=</span> <span class="token function">classToPlain</span><span class="token punctuation">(</span>photo<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="classtoclass⬆"><a href="#classtoclass⬆" aria-hidden="true" class="header-anchor">#</a> classToClass<a href="#table-of-contents">⬆</a></h3> <p>This method transforms your class object into a new instance of the class object.
This may be treated as deep clone of your objects.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> classToClass <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> photo <span class="token operator">=</span> <span class="token function">classToClass</span><span class="token punctuation">(</span>photo<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You can also use an <code>ignoreDecorators</code> option in transformation options to ignore all decorators you classes is using.</p> <h3 id="serialize⬆"><a href="#serialize⬆" aria-hidden="true" class="header-anchor">#</a> serialize<a href="#table-of-contents">⬆</a></h3> <p>You can serialize your model right to json using <code>serialize</code> method:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> serialize <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> photo <span class="token operator">=</span> <span class="token function">serialize</span><span class="token punctuation">(</span>photo<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>serialize</code> works with both arrays and non-arrays.</p> <h3 id="deserialize-and-deserializearray⬆"><a href="#deserialize-and-deserializearray⬆" aria-hidden="true" class="header-anchor">#</a> deserialize and deserializeArray<a href="#table-of-contents">⬆</a></h3> <p>You can deserialize your model from json using the <code>deserialize</code> method:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> deserialize <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> photo <span class="token operator">=</span> <span class="token function">deserialize</span><span class="token punctuation">(</span>Photo<span class="token punctuation">,</span> photo<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>To make deserialization work with arrays, use the <code>deserializeArray</code> method:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> deserializeArray <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> photos <span class="token operator">=</span> <span class="token function">deserializeArray</span><span class="token punctuation">(</span>Photo<span class="token punctuation">,</span> photos<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="enforcing-type-safe-instance⬆"><a href="#enforcing-type-safe-instance⬆" aria-hidden="true" class="header-anchor">#</a> Enforcing type-safe instance<a href="#table-of-contents">⬆</a></h2> <p>The default behaviour of the <code>plainToClass</code> method is to set <em>all</em> properties from the plain object,
even those which are not specified in the class.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> plainToClass <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  firstName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  lastName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> fromPlainUser <span class="token operator">=</span> <span class="token punctuation">{</span>
  unkownProp<span class="token punctuation">:</span> <span class="token string">'hello there'</span><span class="token punctuation">,</span>
  firstName<span class="token punctuation">:</span> <span class="token string">'Umed'</span><span class="token punctuation">,</span>
  lastName<span class="token punctuation">:</span> <span class="token string">'Khudoiberdiev'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">plainToClass</span><span class="token punctuation">(</span>User<span class="token punctuation">,</span> fromPlainUser<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// User {</span>
<span class="token comment">//   unkownProp: 'hello there',</span>
<span class="token comment">//   firstName: 'Umed',</span>
<span class="token comment">//   lastName: 'Khudoiberdiev',</span>
<span class="token comment">// }</span>
</code></pre></div><p>If this behaviour does not suit your needs, you can use the <code>excludeExtraneousValues</code> option
in the <code>plainToClass</code> method while <em>exposing all your class properties</em> as a requirement.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Expose<span class="token punctuation">,</span> plainToClass <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  @<span class="token function">Expose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> id<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  @<span class="token function">Expose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> firstName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  @<span class="token function">Expose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> lastName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> fromPlainUser <span class="token operator">=</span> <span class="token punctuation">{</span>
  unkownProp<span class="token punctuation">:</span> <span class="token string">'hello there'</span><span class="token punctuation">,</span>
  firstName<span class="token punctuation">:</span> <span class="token string">'Umed'</span><span class="token punctuation">,</span>
  lastName<span class="token punctuation">:</span> <span class="token string">'Khudoiberdiev'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">plainToClass</span><span class="token punctuation">(</span>User<span class="token punctuation">,</span> fromPlainUser<span class="token punctuation">,</span> <span class="token punctuation">{</span> excludeExtraneousValues<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// User {</span>
<span class="token comment">//   id: undefined,</span>
<span class="token comment">//   firstName: 'Umed',</span>
<span class="token comment">//   lastName: 'Khudoiberdiev'</span>
<span class="token comment">// }</span>
</code></pre></div><h2 id="working-with-nested-objects⬆"><a href="#working-with-nested-objects⬆" aria-hidden="true" class="header-anchor">#</a> Working with nested objects<a href="#table-of-contents">⬆</a></h2> <p>When you are trying to transform objects that have nested objects,
it's required to known what type of object you are trying to transform.
Since Typescript does not have good reflection abilities yet,
we should implicitly specify what type of object each property contain.
This is done using <code>@Type</code> decorator.</p> <p>Lets say we have an album with photos.
And we are trying to convert album plain object to class object:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Type<span class="token punctuation">,</span> plainToClass <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Album</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  @<span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Photo<span class="token punctuation">)</span>
  photos<span class="token punctuation">:</span> Photo<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Photo</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  filename<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> album <span class="token operator">=</span> <span class="token function">plainToClass</span><span class="token punctuation">(</span>Album<span class="token punctuation">,</span> albumJson<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// now album is Album object with Photo objects inside</span>
</code></pre></div><h3 id="providing-more-than-one-type-option⬆"><a href="#providing-more-than-one-type-option⬆" aria-hidden="true" class="header-anchor">#</a> Providing more than one type option<a href="#table-of-contents">⬆</a></h3> <p>In case the nested object can be of different types, you can provide an additional options object,
that specifies a discriminator. The discriminator option must define a <code>property</code> that holds the subtype
name for the object and the possible <code>subTypes</code> that the nested object can converted to. A sub type
has a <code>value</code>, that holds the constructor of the Type and the <code>name</code>, that can match with the <code>property</code>
of the discriminator.</p> <p>Lets say we have an album that has a top photo. But this photo can be of certain different types.
And we are trying to convert album plain object to class object. The plain object input has to define
the additional property <code>__type</code>. This property is removed during transformation by default:</p> <p><strong>JSON input</strong>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;topPhoto&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
    <span class="token property">&quot;filename&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cool_wale.jpg&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;depth&quot;</span><span class="token operator">:</span> <span class="token number">1245</span><span class="token punctuation">,</span>
    <span class="token property">&quot;__type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;underwater&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Type<span class="token punctuation">,</span> plainToClass <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Photo</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  filename<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Landscape</span> <span class="token keyword">extends</span> <span class="token class-name">Photo</span> <span class="token punctuation">{</span>
  panorama<span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Portrait</span> <span class="token keyword">extends</span> <span class="token class-name">Photo</span> <span class="token punctuation">{</span>
  person<span class="token punctuation">:</span> Person<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">UnderWater</span> <span class="token keyword">extends</span> <span class="token class-name">Photo</span> <span class="token punctuation">{</span>
  depth<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Album</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  @<span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Photo<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    discriminator<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      property<span class="token punctuation">:</span> <span class="token string">'__type'</span><span class="token punctuation">,</span>
      subTypes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> value<span class="token punctuation">:</span> Landscape<span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'landscape'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> value<span class="token punctuation">:</span> Portrait<span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'portrait'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> value<span class="token punctuation">:</span> UnderWater<span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'underwater'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  topPhoto<span class="token punctuation">:</span> Landscape <span class="token operator">|</span> Portrait <span class="token operator">|</span> UnderWater<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> album <span class="token operator">=</span> <span class="token function">plainToClass</span><span class="token punctuation">(</span>Album<span class="token punctuation">,</span> albumJson<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// now album is Album object with a UnderWater object without `__type` property.</span>
</code></pre></div><p>Hint: The same applies for arrays with different sub types. Moreover you can specify <code>keepDiscriminatorProperty: true</code>
in the options to keep the discriminator property also inside your resulting class.</p> <h2 id="exposing-getters-and-method-return-values⬆"><a href="#exposing-getters-and-method-return-values⬆" aria-hidden="true" class="header-anchor">#</a> Exposing getters and method return values<a href="#table-of-contents">⬆</a></h2> <p>You can expose what your getter or method return by setting an <code>@Expose()</code> decorator to those getters or methods:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Expose <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  firstName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  lastName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  password<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  @<span class="token function">Expose</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">get</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastName<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  @<span class="token function">Expose</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">getFullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastName<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="exposing-properties-with-different-names⬆"><a href="#exposing-properties-with-different-names⬆" aria-hidden="true" class="header-anchor">#</a> Exposing properties with different names<a href="#table-of-contents">⬆</a></h2> <p>If you want to expose some of the properties with a different name,
you can do that by specifying a <code>name</code> option to <code>@Expose</code> decorator:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Expose <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  @<span class="token function">Expose</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'uid'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  id<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  firstName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  lastName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  @<span class="token function">Expose</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'secretKey'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  password<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  @<span class="token function">Expose</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'fullName'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">getFullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastName<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="skipping-specific-properties⬆"><a href="#skipping-specific-properties⬆" aria-hidden="true" class="header-anchor">#</a> Skipping specific properties<a href="#table-of-contents">⬆</a></h2> <p>Sometimes you want to skip some properties during transformation.
This can be done using <code>@Exclude</code> decorator:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Exclude <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  email<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  @<span class="token function">Exclude</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  password<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now when you transform a User, the <code>password</code> property will be skipped and not be included in the transformed result.</p> <h2 id="skipping-depend-of-operation⬆"><a href="#skipping-depend-of-operation⬆" aria-hidden="true" class="header-anchor">#</a> Skipping depend of operation<a href="#table-of-contents">⬆</a></h2> <p>You can control on what operation you will exclude a property. Use <code>toClassOnly</code> or <code>toPlainOnly</code> options:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Exclude <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  email<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  @<span class="token function">Exclude</span><span class="token punctuation">(</span><span class="token punctuation">{</span> toPlainOnly<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  password<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now <code>password</code> property will be excluded only during <code>classToPlain</code> operation. Vice versa, use the <code>toClassOnly</code> option.</p> <h2 id="skipping-all-properties-of-the-class⬆"><a href="#skipping-all-properties-of-the-class⬆" aria-hidden="true" class="header-anchor">#</a> Skipping all properties of the class<a href="#table-of-contents">⬆</a></h2> <p>You can skip all properties of the class, and expose only those are needed explicitly:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Exclude<span class="token punctuation">,</span> Expose <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>

@<span class="token function">Exclude</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  @<span class="token function">Expose</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  id<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  @<span class="token function">Expose</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  email<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  password<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now <code>id</code> and <code>email</code> will be exposed, and password will be excluded during transformation.
Alternatively, you can set exclusion strategy during transformation:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> classToPlain <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> photo <span class="token operator">=</span> <span class="token function">classToPlain</span><span class="token punctuation">(</span>photo<span class="token punctuation">,</span> <span class="token punctuation">{</span> strategy<span class="token punctuation">:</span> <span class="token string">'excludeAll'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>In this case you don't need to <code>@Exclude()</code> a whole class.</p> <h2 id="skipping-private-properties-or-some-prefixed-properties⬆"><a href="#skipping-private-properties-or-some-prefixed-properties⬆" aria-hidden="true" class="header-anchor">#</a> Skipping private properties, or some prefixed properties<a href="#table-of-contents">⬆</a></h2> <p>If you name your private properties with a prefix, lets say with <code>_</code>,
then you can exclude such properties from transformation too:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> classToPlain <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> photo <span class="token operator">=</span> <span class="token function">classToPlain</span><span class="token punctuation">(</span>photo<span class="token punctuation">,</span> <span class="token punctuation">{</span> excludePrefixes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'_'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This will skip all properties that start with <code>_</code> prefix.
You can pass any number of prefixes and all properties that begin with these prefixes will be ignored.
For example:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Expose<span class="token punctuation">,</span> classToPlain <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> _firstName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> _lastName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  _password<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  <span class="token function">setName</span><span class="token punctuation">(</span><span class="token parameter">firstName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> lastName<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_firstName <span class="token operator">=</span> firstName<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_lastName <span class="token operator">=</span> lastName<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  @<span class="token function">Expose</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">get</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_firstName <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_lastName<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
user<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">'Johny'</span><span class="token punctuation">,</span> <span class="token string">'Cage'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
user<span class="token punctuation">.</span>_password <span class="token operator">=</span> <span class="token string">'123'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> plainUser <span class="token operator">=</span> <span class="token function">classToPlain</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token punctuation">{</span> excludePrefixes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'_'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// here plainUser will be equal to</span>
<span class="token comment">// { id: 1, name: &quot;Johny Cage&quot; }</span>
</code></pre></div><h2 id="using-groups-to-control-excluded-properties⬆"><a href="#using-groups-to-control-excluded-properties⬆" aria-hidden="true" class="header-anchor">#</a> Using groups to control excluded properties<a href="#table-of-contents">⬆</a></h2> <p>You can use groups to control what data will be exposed and what will not be:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Exclude<span class="token punctuation">,</span> Expose<span class="token punctuation">,</span> classToPlain <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  @<span class="token function">Expose</span><span class="token punctuation">(</span><span class="token punctuation">{</span> groups<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token string">'admin'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// this means that this data will be exposed only to users and admins</span>
  email<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  @<span class="token function">Expose</span><span class="token punctuation">(</span><span class="token punctuation">{</span> groups<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'user'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// this means that this data will be exposed only to users</span>
  password<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> user1 <span class="token operator">=</span> <span class="token function">classToPlain</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token punctuation">{</span> groups<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'user'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// will contain id, name, email and password</span>
<span class="token keyword">let</span> user2 <span class="token operator">=</span> <span class="token function">classToPlain</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token punctuation">{</span> groups<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'admin'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// will contain id, name and email</span>
</code></pre></div><h2 id="using-versioning-to-control-exposed-and-excluded-properties⬆"><a href="#using-versioning-to-control-exposed-and-excluded-properties⬆" aria-hidden="true" class="header-anchor">#</a> Using versioning to control exposed and excluded properties<a href="#table-of-contents">⬆</a></h2> <p>If you are building an API that has different versions, class-transformer has extremely useful tools for that.
You can control which properties of your model should be exposed or excluded in what version. Example:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Exclude<span class="token punctuation">,</span> Expose<span class="token punctuation">,</span> classToPlain <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  @<span class="token function">Expose</span><span class="token punctuation">(</span><span class="token punctuation">{</span> since<span class="token punctuation">:</span> <span class="token number">0.7</span><span class="token punctuation">,</span> until<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// this means that this property will be exposed for version starting from 0.7 until 1</span>
  email<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  @<span class="token function">Expose</span><span class="token punctuation">(</span><span class="token punctuation">{</span> since<span class="token punctuation">:</span> <span class="token number">2.1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// this means that this property will be exposed for version starting from 2.1</span>
  password<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> user1 <span class="token operator">=</span> <span class="token function">classToPlain</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token punctuation">{</span> version<span class="token punctuation">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// will contain id and name</span>
<span class="token keyword">let</span> user2 <span class="token operator">=</span> <span class="token function">classToPlain</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token punctuation">{</span> version<span class="token punctuation">:</span> <span class="token number">0.7</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// will contain id, name and email</span>
<span class="token keyword">let</span> user3 <span class="token operator">=</span> <span class="token function">classToPlain</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token punctuation">{</span> version<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// will contain id and name</span>
<span class="token keyword">let</span> user4 <span class="token operator">=</span> <span class="token function">classToPlain</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token punctuation">{</span> version<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// will contain id and name</span>
<span class="token keyword">let</span> user5 <span class="token operator">=</span> <span class="token function">classToPlain</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token punctuation">{</span> version<span class="token punctuation">:</span> <span class="token number">2.1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// will contain id, name and password</span>
</code></pre></div><h2 id="сonverting-date-strings-into-date-objects⬆"><a href="#сonverting-date-strings-into-date-objects⬆" aria-hidden="true" class="header-anchor">#</a> Сonverting date strings into Date objects<a href="#table-of-contents">⬆</a></h2> <p>Sometimes you have a Date in your plain javascript object received in a string format.
And you want to create a real javascript Date object from it.
You can do it simply by passing a Date object to the <code>@Type</code> decorator:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Type <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  email<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  password<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  @<span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Date<span class="token punctuation">)</span>
  registrationDate<span class="token punctuation">:</span> Date<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Note, that dates will be converted to strings when you'll try to convert class object to plain object.</p> <p>Same technique can be used with <code>Number</code>, <code>String</code>, <code>Boolean</code>
primitive types when you want to convert your values into these types.</p> <h2 id="working-with-arrays⬆"><a href="#working-with-arrays⬆" aria-hidden="true" class="header-anchor">#</a> Working with arrays<a href="#table-of-contents">⬆</a></h2> <p>When you are using arrays you must provide a type of the object that array contains.
This type, you specify in a <code>@Type()</code> decorator:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Type <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Photo</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  @<span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Album<span class="token punctuation">)</span>
  albums<span class="token punctuation">:</span> Album<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You can also use custom array types:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Type <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AlbumCollection</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span><span class="token operator">&lt;</span>Album<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// custom array functions ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Photo</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  @<span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Album<span class="token punctuation">)</span>
  albums<span class="token punctuation">:</span> AlbumCollection<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Library will handle proper transformation automatically.</p> <p>ES6 collections <code>Set</code> and <code>Map</code> also require the <code>@Type</code> decorator:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Skill</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Weapon</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  range<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Player</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  @<span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Skill<span class="token punctuation">)</span>
  skills<span class="token punctuation">:</span> Set<span class="token operator">&lt;</span>Skill<span class="token operator">&gt;</span><span class="token punctuation">;</span>

  @<span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Weapon<span class="token punctuation">)</span>
  weapons<span class="token punctuation">:</span> Map<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> Weapon<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="additional-data-transformation⬆"><a href="#additional-data-transformation⬆" aria-hidden="true" class="header-anchor">#</a> Additional data transformation<a href="#table-of-contents">⬆</a></h2> <h3 id="basic-usage⬆"><a href="#basic-usage⬆" aria-hidden="true" class="header-anchor">#</a> Basic usage<a href="#table-of-contents">⬆</a></h3> <p>You can perform additional data transformation using <code>@Transform</code> decorator.
For example, you want to make your <code>Date</code> object to be a <code>moment</code> object when you are
transforming object from plain to class:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Transform <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> moment <span class="token keyword">from</span> <span class="token string">'moment'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Moment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'moment'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Photo</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  @<span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Date<span class="token punctuation">)</span>
  @<span class="token function">Transform</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> value <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">moment</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> toClassOnly<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  date<span class="token punctuation">:</span> Moment<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now when you call <code>plainToClass</code> and send a plain representation of the Photo object,
it will convert a date value in your photo object to moment date.
<code>@Transform</code> decorator also supports groups and versioning.</p> <h3 id="advanced-usage⬆"><a href="#advanced-usage⬆" aria-hidden="true" class="header-anchor">#</a> Advanced usage<a href="#table-of-contents">⬆</a></h3> <p>The <code>@Transform</code> decorator is given more arguments to let you configure how you want the transformation to be done.</p> <div class="language-ts extra-class"><pre class="language-ts"><code>@<span class="token function">Transform</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> value<span class="token punctuation">,</span> key<span class="token punctuation">,</span> obj<span class="token punctuation">,</span> <span class="token keyword">type</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> value<span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td><code>value</code></td> <td>The property value before the transformation.</td></tr> <tr><td><code>key</code></td> <td>The name of the transformed property.</td></tr> <tr><td><code>obj</code></td> <td>The transformation source object.</td></tr> <tr><td><code>type</code></td> <td>The transformation type.</td></tr> <tr><td><code>options</code></td> <td>The options object passed to the transformation method.</td></tr></tbody></table> <h2 id="other-decorators⬆"><a href="#other-decorators⬆" aria-hidden="true" class="header-anchor">#</a> Other decorators<a href="#table-of-contents">⬆</a></h2> <table><thead><tr><th>Signature</th> <th>Example</th> <th>Description</th></tr></thead> <tbody><tr><td><code>@TransformClassToPlain</code></td> <td><code>@TransformClassToPlain({ groups: [&quot;user&quot;] })</code></td> <td>Transform the method return with classToPlain and expose the properties on the class.</td></tr> <tr><td><code>@TransformClassToClass</code></td> <td><code>@TransformClassToClass({ groups: [&quot;user&quot;] })</code></td> <td>Transform the method return with classToClass and expose the properties on the class.</td></tr> <tr><td><code>@TransformPlainToClass</code></td> <td><code>@TransformPlainToClass(User, { groups: [&quot;user&quot;] })</code></td> <td>Transform the method return with plainToClass and expose the properties on the class.</td></tr></tbody></table> <p>The above decorators accept one optional argument:
ClassTransformOptions - The transform options like groups, version, name</p> <p>An example:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>@<span class="token function">Exclude</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  @<span class="token function">Expose</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  firstName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  @<span class="token function">Expose</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  lastName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  @<span class="token function">Expose</span><span class="token punctuation">(</span><span class="token punctuation">{</span> groups<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'user.email'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  email<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  password<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
  @<span class="token function">TransformClassToPlain</span><span class="token punctuation">(</span><span class="token punctuation">{</span> groups<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'user.email'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span>firstName <span class="token operator">=</span> <span class="token string">'Snir'</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span>lastName <span class="token operator">=</span> <span class="token string">'Segal'</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span>password <span class="token operator">=</span> <span class="token string">'imnosuperman'</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> user<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> controller <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> user <span class="token operator">=</span> controller<span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>the <code>user</code> variable will contain only firstName,lastName, email properties because they are
the exposed variables. email property is also exposed because we metioned the group &quot;user.email&quot;.</p> <h2 id="working-with-generics⬆"><a href="#working-with-generics⬆" aria-hidden="true" class="header-anchor">#</a> Working with generics<a href="#table-of-contents">⬆</a></h2> <p>Generics are not supported because TypeScript does not have good reflection abilities yet.
Once TypeScript team provide us better runtime type reflection tools, generics will be implemented.
There are some tweaks however you can use, that maybe can solve your problem.
<a href="https://github.com/pleerock/class-transformer/tree/master/sample/sample4-generics" target="_blank" rel="noopener noreferrer">Checkout this example.<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="implicit-type-conversion⬆"><a href="#implicit-type-conversion⬆" aria-hidden="true" class="header-anchor">#</a> Implicit type conversion<a href="#table-of-contents">⬆</a></h2> <blockquote><p><strong>NOTE</strong> If you use class-validator together with class-transformer you propably DON'T want to enable this function.</p></blockquote> <p>Enables automatic conversion between built-in types based on type information provided by Typescript. Disabled by default.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> IsString <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-validator'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyPayload</span> <span class="token punctuation">{</span>
  @<span class="token function">IsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  prop<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> result1 <span class="token operator">=</span> <span class="token function">plainToClass</span><span class="token punctuation">(</span>MyPayload<span class="token punctuation">,</span> <span class="token punctuation">{</span> prop<span class="token punctuation">:</span> <span class="token number">1234</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> enableImplicitConversion<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result2 <span class="token operator">=</span> <span class="token function">plainToClass</span><span class="token punctuation">(</span>MyPayload<span class="token punctuation">,</span> <span class="token punctuation">{</span> prop<span class="token punctuation">:</span> <span class="token number">1234</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> enableImplicitConversion<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 *  result1 will be `{ prop: &quot;1234&quot; }` - notice how the prop value has been converted to string.
 *  result2 will be `{ prop: 1234 }` - default behaviour
 */</span>
</code></pre></div><h2 id="how-does-it-handle-circular-references-⬆"><a href="#how-does-it-handle-circular-references-⬆" aria-hidden="true" class="header-anchor">#</a> How does it handle circular references?<a href="#table-of-contents">⬆</a></h2> <p>Circular references are ignored.
For example, if you are transforming class <code>User</code> that contains property <code>photos</code> with type of <code>Photo</code>,
and <code>Photo</code> contains link <code>user</code> to its parent <code>User</code>, then <code>user</code> will be ignored during transformation.
Circular references are not ignored only during <code>classToClass</code> operation.</p> <h2 id="example-with-angular2⬆"><a href="#example-with-angular2⬆" aria-hidden="true" class="header-anchor">#</a> Example with Angular2<a href="#table-of-contents">⬆</a></h2> <p>Lets say you want to download users and want them automatically to be mapped to the instances of <code>User</code> class.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> plainToClass <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'class-transformer'</span><span class="token punctuation">;</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>http
  <span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'users.json'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token function">plainToClass</span><span class="token punctuation">(</span>User<span class="token punctuation">,</span> res <span class="token keyword">as</span> Object<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">users</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// now &quot;users&quot; is type of User[] and each user has getName() and isAdult() methods available</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You can also inject a class <code>ClassTransformer</code> as a service in <code>providers</code>, and use its methods.</p> <p>Example how to use with angular 2 in <a href="http://plnkr.co/edit/Mja1ZYAjVySWASMHVB9R" target="_blank" rel="noopener noreferrer">plunker<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
Source code is <a href="https://github.com/pleerock/class-transformer-demo" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="samples⬆"><a href="#samples⬆" aria-hidden="true" class="header-anchor">#</a> Samples<a href="#table-of-contents">⬆</a></h2> <p>Take a look on samples in <a href="https://github.com/pleerock/class-transformer/tree/master/sample" target="_blank" rel="noopener noreferrer">./sample<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for more examples of
usages.</p> <h2 id="release-notes⬆"><a href="#release-notes⬆" aria-hidden="true" class="header-anchor">#</a> Release notes<a href="#table-of-contents">⬆</a></h2> <p>See information about breaking changes and release notes <a href="https://github.com/typestack/class-transformer/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/bus/assets/js/app.9b9c970b.js" defer></script><script src="/bus/assets/js/2.40db6fc8.js" defer></script><script src="/bus/assets/js/22.153c6055.js" defer></script>
  </body>
</html>
